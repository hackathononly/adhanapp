---
import PrayerTimeTable from "./PrayerTimeTable.astro";
import RandomTazkirah from "./RandomTazkirah.astro";
import Constants from "../constants";
import {
  getWaktuSolat,
  getLocationFromZone,
  convertDateMonthDay,
} from "../util";

const location = Astro.params.zone
    ? getLocationFromZone(Astro.params.zone)
    : Constants.defaultSettings.city || localStorage.getItem("location"),
  zone = Astro.params.zone
    ? Astro.params.zone
    : Constants.defaultSettings.zone || localStorage.getItem("zone");

const { hijri, date, day } = getWaktuSolat(zone);
---

<div class="nav py-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
  <div class="p-4 bg-base-200 border rounded-box border-gray-700">
    <div class="flex pb-4">
      <ul class="text-xs text-gray-400">
        <li class="hidden">{hijri}</li>
        <li>{convertDateMonthDay(date)}</li>
        <li>{day}</li>
      </ul>
    </div>
    <h3>{location}</h3>
  </div>
  <div class="p-4 border rounded-box border-gray-700">
    <PrayerTimeTable />
  </div>
  <div class="p-4 border rounded-box border-gray-700">
    <RandomTazkirah />
  </div>
</div>
