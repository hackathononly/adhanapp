---
import PrayerTimeTable from "./PrayerTimeTable.astro";
import RandomTazkirah from "./RandomTazkirah.astro";
import Constants from "../constants";
import { getWaktuSolat, convertDate } from "../util";

const location = Astro.props.location
    ? Astro.props.location
    : Constants.defaultSettings.waktuSolatCity,
  //localStorage.getItem("location")
  cityCode = Astro.params.city
    ? Astro.params.city
    : Constants.defaultSettings.waktuSolatStateCode;
//localStorage.getItem("cityCode")

const { hijri, date, day } = getWaktuSolat(cityCode);
---

<div class="nav py-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
  <div class="p-8">
    <div class="flex pb-4">
      <ul class="text-xs text-gray-400">
        <li class="hidden">{hijri}</li>
        <li>{convertDate(date)}</li>
        <li>{day}</li>
      </ul>
    </div>
    <h3>{location}</h3>
  </div>
  <div class="p-8 border rounded-box border-gray-700">
    <PrayerTimeTable />
  </div>
  <RandomTazkirah />
</div>
